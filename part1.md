# Python文法の基礎


Python文法の中でもデータ分析プログラミングで多用する部分に焦点を当てる。

## 型・メソッド・関数

:::{important}
* すべてのデータには、種類を見分けるための「**型**」が定義・付与されている
* 型に定義される操作として、**メソッド**が定義されている。
    * メソッドは、`オブジェクト.メソッド名()`という表記
* 複数の型に共通する操作として、**関数**が定義されている。
    * 関数は、`関数(オブジェクト)`という表記
    * 代表例：`len(obj)`はオブジェクトの長さを返す関数
        * `len([0,1,2])`：リストの長さ
        * `len("東洋大学")`：文字列の長さ
:::

## 真偽値と、比較演算子・論理演算子

:::{important} 
* 真偽値の名前と種類
* 比較演算子の種類
* 論理演算子の種類
* オブジェクトの同一性
:::

### 比較演算子
- **2つの値の関係を質問する演算子**
- 実行結果は必ず以下の**真偽値**のどちらか
  - `True`（真）
  - `False`（偽）

#### 演算子の種類と意味

| 演算子 | 意味 |
|---|---|
| `A > B` | AはBより大きい |
| `A >= B` | AはB以上 |
| `A < B` | AはBより小さい |
| `A <= B` | AはB以下 |
| `A == B` | AはBと等しい |
| `A != B` | AはBと等しくない |

---

### 真偽値（Boolean）
- `True` / `False` は **ブール型（bool）**
- 比較演算子の返り値は常に真偽値

### 同一性

Pythonをはじめとするプログラミング言語では、「同じ」ことを表すために3種類の同一性が定義されている。

#### (1) 内容の同一性
- 値が等しいかどうか
- `==` / `!=` で判定

```python
100 / 2 == 50.0   # True
```

#### (2) 型（タイプ）の同一性
- Pythonでは `type()` を使用

```python
type(3.14) == float   # True
type(True) == bool    # True
```

#### (3) IDの同一性
- **同じオブジェクトを参照しているか**
- `is` / `is not` で判定

```python
a is b
a is not b
```

---

### 論理演算子

#### (1) 種類と意味

| 論理演算子 | 意味 |
|---|---|
| `A and B` | AとBが両方True |
| `A or B` | AまたはBがTrue |
| `not A` | Aの否定 |

---

#### (2) 真理値表（重要）

論理演算子の式は、真偽値のどちらかになる。

下の表では、AとBが「比較演算子の結果」で、これらを論理演算子`and`, `or`で組み合わせたときの、式の値。

| A | B | A and B | A or B |
|---|---|--------|--------|
| True | True | True | True |
| True | False | False | True |
| False | True | False | True |
| False | False | False | False |

これらを記憶するのではなく、論理演算子を使った計算結果として導出できるようにしておこう。

#### (3) 問いかけメソッドとの併用

文字列オブジェクトには、その内容を問い合わせて、真偽値を返すメソッドがある：

| メソッド | Trueになる条件 |
|---|---|
| `str.isalpha()` | 英字のみ |
| `str.isupper()` | 大文字のみ |
| `str.startswith("T")` | "T"で始まる |
---

## リスト

:::{important}
- 複数のデータを**順序あり**でまとめたもの。それぞれのデータを要素と呼ぶ。
- 先頭要素を0で始める整数=**インデックス番号**で要素にアクセス
- リストの長さ(要素数)は関数`len(リスト)`で分かる。
    - 先頭要素のインデックスは0なので、最後尾のインデックス番号は`長さ-1`となることに注意
- スライシング(範囲指定)
:::

```python
# 整数のリスト
numbers = [10, 20, 30]
# 混合タイプ
mixed = [1, "apple", True]
# 要素数（リストの長さ）
len(numbers) # 3
len(mixed)   # 3
# インデックス番号に負の整数を指定すると、末尾から順にアクセスできる
numbers[-1]  # 30
mixed[-2]    # "apple"
```

### (1) 要素の追加

メソッド`append()`で、リストの末尾に要素を追加できる。

```python
numbers.append(41)
# [10, 20, 30, 41]
```

### (2) 要素の変更

`リスト[i] = j`で、インデックス`i`の位置にある要素の値を`j`に変更できる。

```python
mixed[-1] = False
# [1, "apple", False]
mixed[0] = 10
# [10, "apple", False]
```

### (3) スライシング(範囲指定)

- スライス`[j:k]`は、**インデックス `j` から始めて、`k` の直前まで** の要素を取り出す。

```python
a = [0, 1, 2, 3, 4]
a[0:3]  # → [0, 1, 2]
```
* スライス`[0:3]`は、
    * 0 は含む
    * 3 は含**まない** (インデックス2まで)

* 以下の**スライシングの書式**も重要
    * スライス`[:k]`は、**先頭から始めて、`k`の直前まで**の要素を取り出す。
    * スライス`[j:]`は、**インデックスjから初めて、最後まで**の要素を取り出す。
---

## 辞書

:::{important}
- **キー：値 {key : value}** の対応関係
- **順序ではなくキーでアクセス**
- キーは一意（重複不可）
:::

```python
score = {
    "田中": 72,
    "鈴木": 85
}
```

### (1) 値へのアクセス
```python
score["田中"]   # 72
```

### (2) {キー：値}を追加
```python
score["田村"] = 60
# 「キーが"田村"・値が60」が追加
score = {
    "田中": 72,
    "鈴木": 85,
    "田村": 60
}
```

---

## forループと、if判定文

:::{important} 
* リストや辞書は、プログラムの中でforループやif判定文と組み合わせて用いられる。
:::

### (1) 基本形：list と for文

#### (1-1) 全要素に同じ処理をする
for文は「中身を順番に1つずつ処理」

```python
numbers = [10, 20, 30]
for x in numbers:
    print(x * 2) # 要素の2倍が出力される
```

### (2) for文の内部にあるif文（条件判定）

リストの要素を次々にチェック(条件判定)する。

#### (2-1) 3条件に合う要素だけ処理
```python
numbers = [10, 20, 30, 41]

for x in numbers:
    if x % 2 == 0: # もしxを2で割ったときの余りが0かどうか
        # Trueの場合
        print(x) # 10, 20, 30だけ出力される
        # Falseの場合(何もしない)
```
- if文は **True / False** で分岐
- 比較演算子・論理演算子がここで効く

#### (2-2) 条件に合うものだけ集める
リストの`append()`メソッドで、新しい要素をリストの末尾に追加する。

```python
numbers = [10, 20, 30, 41]
# 空のリスト
result = []

for x in numbers:
    if x >= 20:
        result.append(x)

print(result) # [30, 41]
```

### (3) dict と for文（キーと値の扱い）

#### (3-1) キーだけを回す
```python
scores = {"田中": 72, "鈴木": 85}

for name in scores:
    print(name)
```

#### (3-2) 値だけを回す
```python
for score in scores.values():
    print(score)
```

#### (3-3) キーと値を同時に扱う（重要）
辞書オブジェクトに定義されるメソッド`items()`は、特に重要。

```python
for name, score in scores.items():
    print(name, score)
```

- **forループの中で同時にバラして取り出す**ことができる。

---
